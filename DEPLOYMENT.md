**راهنمای استقرار پاک و ایمن (خلاصه)**

- **هدف:** آماده کردن یک بستهٔ تمیز برای آپلود به مسیر نصب وردپرس: `/domains/mivesf.ir/private_html/woocom` و حذف فایل‌های نصب/پشتیبان/حاوی رمز عبور.

- **گام 1 — پشتیبان کامل (ضروری):**
  - از فایل‌ها پشتیبان بگیرید (File Manager یا FTP): کل پوشه سایت فعلی را دانلود یا فشرده کنید.
  - از دیتابیس در phpMyAdmin یا بخش Backup در کنترل‌پنل یک Export کامل بگیرید (SQL).

- **گام 2 — ساخت بسته تمیز محلی:**
  - در ویندوز PowerShell در ریشهٔ پروژه اجرا کنید:

```powershell
.\prepare_deploy.ps1
```

  - خروجی: `spm-clean.zip` ساخته می‌شود که فایل‌های حساس و اسکریپت‌های نصب حذف شده‌اند.

- **گام 3 — آپلود به سرور (با cPanel File Manager):**
  1. وارد کنترل‌پنل شوید: https://cp199.netafraz.com:2223/ با کاربر/رمز شما.
 2. به File Manager → مسیر `/domains/mivesf.ir/private_html/woocom` بروید.
 3. اگر می‌خواهید جایگزین کنید: ابتدا از پوشه فعلی یک بکاپ zip بگیرید.
 4. `Upload` → فایل `spm-clean.zip` را آپلود کنید.
 5. پس از آپلود، روی فایل راست کلیک → Extract.

- **گام 4 — تنظیمات بعد از آپلود:**
  - مطمئن شوید `wp-config.php` دارای اطلاعات دیتابیس درست است؛ اگر دیتابیس جدید ساخته‌اید، آن مقادیر را به‌روز کنید.
  - فایل‌های نصب/اسکریپت‌ها را از سرور حذف کنید (مثلاً `setup-final.php`, `setup-simple.php`, `create-fruit-shop.php`, `install-woocommerce.php`, `reset-password.php`, فایل‌های .sql و .env).
  - فایل‌های آپلود شده را با سطح دسترسی مناسب تنظیم کنید (فایل‌ها `644`، پوشه‌ها `755`).

- **گام 5 — دیتابیس / آدرس سایت:**
  - اگر دیتابیس را وارد می‌کنید یا آدرس سایت تغییر کرده، جدول `wp_options` را بررسی و مقدار `siteurl` و `home` را درست کنید.
  - برای فعال کردن SSL، از کنترل‌پنل یا Let’s Encrypt استفاده کنید و سپس در وردپرس آدرس‌ها را به `https://mivesf.ir/woocom` تنظیم کنید.

- **گام 6 — ورود به داشبورد وردپرس و ووکامرس:**
  - آدرس پنل مدیریت: https://mivesf.ir/woocom/wp-admin
  - کاربر: `mahmud`  — رمز: همان‌که دادید (`1270156659`) یا رمز فعلی در دیتابیس

- **فایل‌هایی که پیشنهاد می‌کنم حتماً حذف کنید از مخزن/سرور:**
  - `setup-final.php`, `setup-simple.php`, `create-fruit-shop.php`, `complete-setup.php`, `install-woocommerce.php`, `quick-import.php`, `import-products.php`, `reset-password.php`, `*.env*`, `*.sql`, `FILES-PACKAGE.txt`, `FINAL-INSTALL-STEPS.txt`, `QUICK-INSTALL.txt`

- **نکات امنیتی نهایی:**
  - پس از اطمینان از عملکرد، فایل‌های نصب/اسکریپت را حذف کنید.
  - رمزهای کنترل‌پنل و دیتابیس را در فایل‌های متنی ذخیره نکنید.
  - اگر لازم است رمز وردپرس را تغییر دهید، از Users → All Users در داشبورد یا دستور wp-cli استفاده کنید.

در صورت تمایل، من می‌توانم: بستهٔ `spm-clean.zip` را تولید کنم (شما در سیستم خود دستور `prepare_deploy.ps1` اجرا کنید) و سپس مرحله به مرحله شما را تا انتقال و بررسی سایت راهنمایی کنم.
